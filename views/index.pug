extends layout.pug
include mixins/_tableRow.pug

block defectBar
  h3 Defect Criterion Pareto
  br/
  div#paretoChart
  script.
    const top10data = !{JSON.stringify(defects)}.slice(0,-1);
    BarChartHorizontal(top10data, 'paretoChart', {
      x: d => d.dppm,
      y: d => d.defectname,
      yDomain: top10data.map(d => d.defectname),
      height: 500,
      marginRight: 20,
      marginLeft: 100,
      xLabel: "dppm",
      color: "steelblue"
    });

block dailyFAOutput
  h3 Daily Final Assembly Output
  br/
  div#dailyFAChart
  script.
    const dailyPD = !{JSON.stringify(PDdata)};
    dailyPD.forEach((d) => {
      d.recorddate = new Date(d.recorddate);
    });
    BarChartVertical(dailyPD, 'dailyFAChart', {
      x: d => d.recorddate.toLocaleDateString(),
      y: d => d.PDoutput,
      xDomain: d3.groupSort(dailyPD, d => d.dateID, d => d.recorddate.toLocaleDateString()),
      height: 500,
      marginRight: 30,
      marginLeft: 50,
      yLabel: "units produced",
      color: "steelblue"
    })

block defectTable
    table.table.table-striped.table-hover
      thead
        tr
          th Defect criteria
          th Quantity
          th DPPM
        tbody
          each row in defects
            +tableRow(row)
        tfoot
          tr
            th(colspan='6')